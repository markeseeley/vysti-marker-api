GOAL: Finish the Precision meter end-to-end (scoring + UI + navigation) without breaking the existing Cohesion pillboxes / jump behavior.

FILES: marker.py, student.html, marker.css (only if needed for styling).

========================
A) BACKEND RULE OUTPUT (marker.py)
========================
We want Precision to reflect real rule-breaks, not flimsy word-frequency math. So: make sure every Precision-relevant problem produces (1) a label string (note) that is NON-EMPTY, (2) a mark so DOC_EXAMPLES captures sentences, (3) a label_count entry, and (4) no spammy yellow arrows unless explicitly intended.

1) FIX PHASE 5A “Delete-phrases” BUG
   - Right now rule_description = "" (empty), which makes:
     - labels_used contain "" (garbage)
     - DOC_EXAMPLES skip these marks because note is falsy
     - Precision can’t reliably count or navigate these issues
   - Set a real, stable label string, e.g.:
       rule_description = "Remove unnecessary filler words/phrases"
   - Keep these delete-phrases as RED strikethrough (no yellow arrow label), but DO set "note" to rule_description so counts/examples exist.

2) EXPAND DELETE PHRASES
   - Add at least:
       "successfully"
   - Keep existing:
       "in conclusion", "the use of", etc.
   - Keep conclusion_only_delete_phrases behavior as-is.

3) “THE AUTHOR” RULE (requested)
   - Add a dedicated rule (NOT lumped into delete-phrases) so guidance is explicit.
   - New label string (stable):
       rule_note_author_ref = "Use the author’s name instead of 'the author'"
   - Regex to catch:
       \bthe\s+author\b
       \bthe\s+author's\b
     (case-insensitive)
   - Skip inside quotations (pos_in_spans).
   - Mark style: GRAY_25 highlight (NOT red strikethrough) because the student should REPLACE, not delete.
   - Add a yellow label only once (first instance), like other rules:
       if rule_note_author_ref not in labels_used: mark with label True; else just highlight.

4) UPDATE “AND” RULE THRESHOLD + LABEL TEXT
   - Change:
       rule_note_and = "Avoid using the word 'and' more than once in a sentence"
     to:
       rule_note_and = "Avoid using the word 'and' more than twice in a sentence"
   - Change threshold:
       if len(and_tokens) > 1:
     to:
       if len(and_tokens) > 2:
   - Keep the same behavior: highlight all “and” tokens in TURQUOISE, label only once.

5) ADD A NEW RULE: QUOTATIONS OVER 5 WORDS (Precision Wordy)
   - New label string:
       rule_note_long_quote = "Limit quotations to 5 words or fewer"
   - Use existing quote spans if available (spans list). For each quote interior:
       interior = flat_text[q_start:q_end].strip()
       word_count = len(re.findall(r"[A-Za-z']+", interior))
       if word_count > 5: flag it
   - Skip teacher-supplied title quotes (use is_teacher_title_interior(interior)).
   - Mark style: GRAY_25 highlight the quote interior (or the whole quote if that’s easy).
   - Add label only once (first time), then highlight-only.

6) ADD A NEW RULE: UNQUALIFIED / ABSOLUTE LANGUAGE (Precision Imprecise)
   - The user wants “always”, “never”, etc.
   - Keep it conservative to avoid carnage:
       absolute_terms = ["always", "never"]
     (You can add more later safely.)
   - New label string:
       rule_note_absolute = "Avoid absolute language like 'always' or 'never'"
   - Regex match whole words, skip inside quotes.
   - Mark style: GRAY_25 highlight; label only once (first time), then highlight-only.

Acceptance criteria for marker.py:
- These rules produce:
  - non-empty note strings
  - correct counts in label_counts
  - examples in DOC_EXAMPLES for navigation
- No new yellow-arrow spam for delete phrases; only “first instance” labels for author/quotes/absolute language.

========================
B) PRECISION METER SCORING + UI + NAVIGATION (student.html)
========================
We’re replacing the current Precision logic (per-100 “and/which” math + “Top clutter” caption) with:
- 3 clickable “quest” rows (pillbox + red dots):
    1) Unnecessary
    2) Wordy
    3) Imprecise
- Clicking a row:
    - jumps/highlights the next issue in Preview (like Cohesion),
    - AND loads the relevant Rule-break revisions (like Power meter),
    - WITHOUT breaking existing Cohesion pillboxes.

1) REMOVE OLD PRECISION FORMULA
   - Delete the old counts:
       andCount, whichCount, reader/audience, etc used for per100 penalty
   - Stop using:
       precisionSub = "Top clutter: ..."
   - Precision subtext area becomes the quest UI (dot rows).

2) DEFINE LABEL GROUPS THAT DRIVE PRECISION
   Use the *exact* marker.py note strings:

   UNNECESSARY_LABELS = [
     "Remove unnecessary filler words/phrases",
     "Avoid referring to the reader or audience unless necessary",
     "Avoid the words 'therefore', 'thereby', 'hence', and 'thus'",
     "Use the author’s name instead of 'the author'"
   ]

   WORDY_LABELS = [
     "Avoid the word 'which'",
     "Avoid using the word 'and' more than twice in a sentence",
     "Limit quotations to 5 words or fewer"
   ]

   IMPRECISE_LABELS = [
     "Avoid overly general words like 'society', 'universe', 'reality', 'life', and 'truth'",
     "Clarify pronouns and antecedents",
     "Do not refer to the text as a text; refer to context instead",
     "Avoid absolute language like 'always' or 'never'"
   ]

   IMPORTANT:
   - These strings must match marker.py exactly.

3) COMPUTE PRECISION SCORE FROM LABEL COUNTS (NOT raw word frequency)
   - Use liveLabelCounts (already used for the chart) when available.
   - Compute category counts:
       unnecessaryCount = sumCounts(UNNECESSARY_LABELS)
       wordyCount = sumCounts(WORDY_LABELS)
       impreciseCount = sumCounts(IMPRECISE_LABELS)

   - Scoring rule (simple + interpretable):
       penalty = unnecessaryCount*3 + wordyCount*2 + impreciseCount*3
       precisionScore = clamp(100 - penalty, 0, 100)
   - 100 happens only when all three counts are 0. That’s the whole point of red dots.

   - Return precision metric with details:
       precision: {
         score,
         sub: "",   // DO NOT show “Top clutter” anymore
         details: { unnecessaryCount, wordyCount, impreciseCount }
       }

   - If liveLabelCounts is empty (pre-mark), keep a fallback:
       - keep old “Top clutter” logic OR just show “—” score,
       - BUT disable the quest rows until Preview exists.
     (Do not break page load for unmarked essays.)

4) BUILD PRECISION QUEST UI (PILLBOX + RED DOTS)
   - Reuse the same dot-row styling/components used by Cohesion/Power (quest-row / dots).
   - In renderMetrics():
       after renderSingleMetric(precision...), call:
         renderPrecisionQuests(precisionSubText, metrics?.precision)
   - renderPrecisionQuests() should:
       - clear precisionSubText
       - create 3 quest rows:
           "Unnecessary"
           "Wordy"
           "Imprecise"
       - each row shows red dots equal to its count (cap visible dots at 10 + “+N” overflow)
       - each pill is clickable only if count > 0 AND preview is loaded; otherwise disabled

5) MAKE THE PILLBOX CLICK BEHAVIOR POWERFUL (jump + open revisions)
   - Implement a precision issue cache just like cohesionIssueCache:
       precisionIssueCache = {
         sourceKey: <hash of labelCounts + maybe essay id>,
         unnecessary: [examples...],
         wordy: [examples...],
         imprecise: [examples...],
         idx: { unnecessary:0, wordy:0, imprecise:0 }
       }

   - Build example lists by pulling from existing examples storage:
       lastRevisionSectionData?.examplesByLabel?.[label]
     Merge across labels in the category.
     Filter out dismissed instances via isDismissedIssueInstance(label, sentence).

   - On click "Wordy" etc:
       - pick next example object from cache
       - call highlightAndScrollToExample(example, null, { scroll: true })
       - ALSO open revisions for that example’s label:
           openRevisionExampleFromIssueId(getIssueIdForLabel(example.label), example.label)

   - If preview is not loaded:
       show a polite message in the UI (e.g., “Click ‘Mark my essay’ to load Preview.”) and do nothing else.

6) DO NOT BREAK COHESION PILLBOXES
   - Do not rename/alter cohesion functions.
   - Add new functions/vars with “Precision” names only.
   - Avoid reusing cohesionIssueCache, indices, etc.

7) UPDATE METRIC INFO POPOVER COPY (optional but recommended)
   - Update METRIC_INFO.precision tips to match the new categories:
     - Unnecessary: filler phrases, reader/audience, banned logic connectors, “the author”
     - Wordy: which, too-many-and, long quotes
     - Imprecise: vague terms, pronoun antecedents, text-as-text, absolute language

========================
C) STYLING (marker.css) – only if needed
========================
If the quest rows/dots styling is currently scoped only to Power/Cohesion, ensure Precision can reuse it.
DO NOT invent new CSS if existing classes already handle it.

========================
D) QUICK TESTS (must pass)
========================
1) Essay with:
   - “Nonetheless,” at sentence start (this is cohesion; ignore here)
   - “the author” in body
   - “always” / “never”
   - a quote longer than 5 words
   - 3+ “and” in a single sentence
   => Precision shows red dots in correct buckets + clicking jumps to the sentence + loads the matching revision label.

2) Essay with zero Precision issues:
   => Precision = 100 and shows success text, no quest rows or disabled rows.

3) Cohesion pillboxes still work exactly as before.

DELIVERABLE: Commit changes so Precision meter is fully functional and navigable.
